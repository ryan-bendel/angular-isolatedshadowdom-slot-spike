{"version":3,"file":"dom_renderer.mjs","sources":["../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/platform-browser/src/dom/events/event_manager.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/platform-browser/src/dom/shared_styles_host.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/platform-browser/src/dom/isolated_style_scope.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/platform-browser/src/dom/dom_renderer.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  Inject,\n  Injectable,\n  InjectionToken,\n  NgZone,\n  ɵRuntimeError as RuntimeError,\n  type ListenerOptions,\n} from '@angular/core';\n\nimport {RuntimeErrorCode} from '../../errors';\n\n/**\n * The injection token for plugins of the `EventManager` service.\n *\n * @publicApi\n */\nexport const EVENT_MANAGER_PLUGINS = new InjectionToken<EventManagerPlugin[]>(\n  ngDevMode ? 'EventManagerPlugins' : '',\n);\n\n/**\n * An injectable service that provides event management for Angular\n * through a browser plug-in.\n *\n * @publicApi\n */\n@Injectable()\nexport class EventManager {\n  private _plugins: EventManagerPlugin[];\n  private _eventNameToPlugin = new Map<string, EventManagerPlugin>();\n\n  /**\n   * Initializes an instance of the event-manager service.\n   */\n  constructor(\n    @Inject(EVENT_MANAGER_PLUGINS) plugins: EventManagerPlugin[],\n    private _zone: NgZone,\n  ) {\n    plugins.forEach((plugin) => {\n      plugin.manager = this;\n    });\n    this._plugins = plugins.slice().reverse();\n  }\n\n  /**\n   * Registers a handler for a specific element and event.\n   *\n   * @param element The HTML element to receive event notifications.\n   * @param eventName The name of the event to listen for.\n   * @param handler A function to call when the notification occurs. Receives the\n   * event object as an argument.\n   * @param options Options that configure how the event listener is bound.\n   * @returns  A callback function that can be used to remove the handler.\n   */\n  addEventListener(\n    element: HTMLElement,\n    eventName: string,\n    handler: Function,\n    options?: ListenerOptions,\n  ): Function {\n    const plugin = this._findPluginFor(eventName);\n    return plugin.addEventListener(element, eventName, handler, options);\n  }\n\n  /**\n   * Retrieves the compilation zone in which event listeners are registered.\n   */\n  getZone(): NgZone {\n    return this._zone;\n  }\n\n  /** @internal */\n  _findPluginFor(eventName: string): EventManagerPlugin {\n    let plugin = this._eventNameToPlugin.get(eventName);\n    if (plugin) {\n      return plugin;\n    }\n\n    const plugins = this._plugins;\n    plugin = plugins.find((plugin) => plugin.supports(eventName));\n    if (!plugin) {\n      throw new RuntimeError(\n        RuntimeErrorCode.NO_PLUGIN_FOR_EVENT,\n        (typeof ngDevMode === 'undefined' || ngDevMode) &&\n          `No event manager plugin found for event ${eventName}`,\n      );\n    }\n\n    this._eventNameToPlugin.set(eventName, plugin);\n    return plugin;\n  }\n}\n\n/**\n * The plugin definition for the `EventManager` class\n *\n * It can be used as a base class to create custom manager plugins, i.e. you can create your own\n * class that extends the `EventManagerPlugin` one.\n *\n * @publicApi\n */\nexport abstract class EventManagerPlugin {\n  // TODO: remove (has some usage in G3)\n  constructor(private _doc: any) {}\n\n  // Using non-null assertion because it's set by EventManager's constructor\n  manager!: EventManager;\n\n  /**\n   * Should return `true` for every event name that should be supported by this plugin\n   */\n  abstract supports(eventName: string): boolean;\n\n  /**\n   * Implement the behaviour for the supported events\n   */\n  abstract addEventListener(\n    element: HTMLElement,\n    eventName: string,\n    handler: Function,\n    options?: ListenerOptions,\n  ): Function;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {DOCUMENT} from '@angular/common';\nimport {\n  APP_ID,\n  CSP_NONCE,\n  Inject,\n  Injectable,\n  OnDestroy,\n  Optional,\n  PLATFORM_ID,\n} from '@angular/core';\n\n/** The style elements attribute name used to set value of `APP_ID` token. */\nconst APP_ID_ATTRIBUTE_NAME = 'ng-app-id';\n\n/**\n * A record of usage for a specific style including all elements added to the DOM\n * that contain a given style.\n */\ninterface UsageRecord<T> {\n  elements: T[];\n  usage: number;\n}\n\n/**\n * Removes all provided elements from the document.\n * @param elements An array of HTML Elements.\n */\nfunction removeElements(elements: Iterable<HTMLElement>): void {\n  for (const element of elements) {\n    element.remove();\n  }\n}\n\n/**\n * Creates a `style` element with the provided inline style content.\n * @param style A string of the inline style content.\n * @param doc A DOM Document to use to create the element.\n * @returns An HTMLStyleElement instance.\n */\nfunction createStyleElement(style: string, doc: Document): HTMLStyleElement {\n  const styleElement = doc.createElement('style');\n  styleElement.textContent = style;\n\n  return styleElement;\n}\n\n/**\n * Searches a DOM document's head element for style elements with a matching application\n * identifier attribute (`ng-app-id`) to the provide identifier and adds usage records for each.\n * @param doc An HTML DOM document instance.\n * @param appId A string containing an Angular application identifer.\n * @param inline A Map object for tracking inline (defined via `styles` in component decorator) style usage.\n * @param external A Map object for tracking external (defined via `styleUrls` in component decorator) style usage.\n */\nfunction addServerStyles(\n  doc: Document,\n  appId: string,\n  inline: Map<string, UsageRecord<HTMLStyleElement>>,\n  external: Map<string, UsageRecord<HTMLLinkElement>>,\n): void {\n  const elements = doc.head?.querySelectorAll<HTMLStyleElement | HTMLLinkElement>(\n    `style[${APP_ID_ATTRIBUTE_NAME}=\"${appId}\"],link[${APP_ID_ATTRIBUTE_NAME}=\"${appId}\"]`,\n  );\n\n  if (elements) {\n    for (const styleElement of elements) {\n      styleElement.removeAttribute(APP_ID_ATTRIBUTE_NAME);\n      if (styleElement instanceof HTMLLinkElement) {\n        // Only use filename from href\n        // The href is build time generated with a unique value to prevent duplicates.\n        external.set(styleElement.href.slice(styleElement.href.lastIndexOf('/') + 1), {\n          usage: 0,\n          elements: [styleElement],\n        });\n      } else if (styleElement.textContent) {\n        inline.set(styleElement.textContent, {usage: 0, elements: [styleElement]});\n      }\n    }\n  }\n}\n\n/**\n * Creates a `link` element for the provided external style URL.\n * @param url A string of the URL for the stylesheet.\n * @param doc A DOM Document to use to create the element.\n * @returns An HTMLLinkElement instance.\n */\nexport function createLinkElement(url: string, doc: Document): HTMLLinkElement {\n  const linkElement = doc.createElement('link');\n  linkElement.setAttribute('rel', 'stylesheet');\n  linkElement.setAttribute('href', url);\n\n  return linkElement;\n}\n\n@Injectable()\nexport class SharedStylesHost implements OnDestroy {\n  /**\n   * Provides usage information for active inline style content and associated HTML <style> elements per host.\n   * Embedded styles typically originate from the `styles` metadata of a rendered component.\n   */\n  private readonly inline = new Map<\n    ShadowRoot | HTMLHeadElement,\n    Map<string, UsageRecord<HTMLStyleElement>>\n  >();\n\n  /**\n   * Provides usage information for active external style URLs and the associated HTML <link> elements per host.\n   * External styles typically originate from the `ɵɵExternalStylesFeature` of a rendered component.\n   */\n  private readonly external = new Map<\n    ShadowRoot | HTMLHeadElement,\n    Map<string, UsageRecord<HTMLLinkElement>>\n  >();\n\n  /**\n   * Set of host DOM nodes that will have styles attached.\n   */\n  private readonly standardShadowHosts = new Set<Node>();\n  private readonly isolatedShadowRoots: ShadowRoot[] = [];\n\n  constructor(\n    @Inject(DOCUMENT) private readonly doc: Document,\n    @Inject(APP_ID) private readonly appId: string,\n    @Inject(CSP_NONCE) @Optional() private readonly nonce?: string | null,\n    // Cannot remove it due to backward compatibility\n    // (it seems some TGP targets might be calling this constructor directly).\n    @Inject(PLATFORM_ID) platformId: object = {},\n  ) {\n    // Initialize maps for document head\n    const inlineMap = new Map();\n    const externalMap = new Map();\n    this.inline.set(doc.head, inlineMap);\n    this.external.set(doc.head, externalMap);\n\n    addServerStyles(doc, appId, inlineMap, externalMap);\n    this.standardShadowHosts.add(doc.head);\n  }\n\n  /**\n   * Adds embedded styles to the DOM via HTML `style` elements.\n   *\n   * Modified to support IsolatedShadowDom by accepting a specific target shadow root.\n   * This ensures styles are only added where they're actually needed rather than broadcasting\n   * to all active shadow roots.\n   *\n   * @param styles An array of style content strings.\n   * @param urls An optional array of external stylesheet URL strings.\n   * @param shadowRoot Optional shadow root to add styles to. If provided, styles go only to this shadow root.\n   *                   If not provided, styles go to document head and all standard shadow DOM hosts.\n   */\n  addStyles(styles: string[], urls?: string[], shadowRoot?: ShadowRoot): void {\n    for (const style of styles) {\n      this.addUsage(style, this.inline, createStyleElement, shadowRoot);\n    }\n    urls?.forEach((url) => this.addUsage(url, this.external, createLinkElement, shadowRoot));\n  }\n\n  /**\n   * Removes embedded styles from the DOM that were added as HTML `style` elements.\n   * @param styles An array of style content strings.\n   * @param urls An optional array of external stylesheet URL strings to remove.\n   * @param shadowRoot Optional shadow root to remove styles from (for IsolatedShadowDom).\n   */\n  removeStyles(styles: string[], urls?: string[], shadowRoot?: ShadowRoot): void {\n    for (const value of styles) {\n      this.removeUsage(value, this.inline, shadowRoot);\n    }\n\n    urls?.forEach((value) => this.removeUsage(value, this.external, shadowRoot));\n  }\n\n  /**\n   * Handle timing issues with projected components. When adding styles to an\n   * IsolatedShadowDom shadow root, we check if the same styles were previously added to doc.head\n   * due to timing issues (renderer creation before DOM attachment). If so, we clean up the\n   * incorrect doc.head styles to prevent duplication.\n   */\n  protected addUsage<T extends HTMLElement>(\n    value: string,\n    usagesMap: Map<ShadowRoot | HTMLHeadElement, Map<string, UsageRecord<T>>>,\n    creator: (value: string, doc: Document) => T,\n    targetShadowRoot?: ShadowRoot,\n  ): void {\n    if (targetShadowRoot) {\n      // Styles are targeted to a specific shadow root\n      this.addUsageToTarget(value, usagesMap, creator, targetShadowRoot);\n    } else {\n      // Global mode: add to document head and all standard shadow DOM hosts\n      this.addUsageToTarget(value, usagesMap, creator, this.doc.head, true);\n    }\n  }\n\n  /**\n   * Helper method that handles adding styles to a specific target container\n   * while managing usage tracking and deduplication.\n   *\n   * @param shouldAddToHosts When true and styleRoot is document head, creates elements for all hosts\n   *                         (preserves original behavior for standard ShadowDom encapsulation)\n   */\n  private addUsageToTarget<T extends HTMLElement>(\n    value: string,\n    usagesMap: Map<ShadowRoot | HTMLHeadElement, Map<string, UsageRecord<T>>>,\n    creator: (value: string, doc: Document) => T,\n    styleRoot: ShadowRoot | HTMLHeadElement,\n    shouldAddToHosts = false,\n  ): void {\n    let usages = usagesMap.get(styleRoot);\n    if (!usages) {\n      usages = new Map();\n      usagesMap.set(styleRoot, usages);\n    }\n\n    const record = usages.get(value);\n    if (record) {\n      if ((typeof ngDevMode === 'undefined' || ngDevMode) && record.usage === 0) {\n        record.elements.forEach((element) => element.setAttribute('ng-style-reused', ''));\n      }\n      record.usage++;\n      return;\n    }\n\n    // Create new usage record\n    const elements: T[] = [];\n    // HISTORICAL CONTEXT: This behavior exists for backwards compatibility with standard ShadowDom.\n    //\n    // When Angular originally implemented ShadowDom encapsulation, it had a design flaw:\n    // styles from emulated/none-encapsulated components were added to document.head AND\n    // also broadcast to ALL existing shadow roots. This meant that emulated component styles\n    // would \"leak\" into unrelated shadow DOM components, breaking true encapsulation.\n    //\n    // While this is technically incorrect behavior (shadow DOM should be isolated),\n    // changing it would break existing applications that accidentally depend on this\n    // style leakage. Therefore, we preserve this flawed behavior for standard ShadowDom.\n    //\n    if (shouldAddToHosts && styleRoot === this.doc.head && this.standardShadowHosts.size > 0) {\n      // For document head, create elements for all hosts (original behavior for standard ShadowDom)\n      for (const host of this.standardShadowHosts) {\n        elements.push(this.addElement(host, creator(value, this.doc)));\n      }\n    } else {\n      // For shadow roots or when not adding to hosts, create element for the specific target\n      elements.push(this.addElement(styleRoot, creator(value, this.doc)));\n    }\n\n    usages.set(value, {usage: 1, elements});\n  }\n\n  /**\n   * Removal logic to match the new precise targeting approach.\n   * Previously removed styles from all active shadow roots, now removes only from\n   * the specific target. This prevents accidental removal of styles from unrelated\n   * IsolatedShadowDom components.\n   */\n  protected removeUsage<T extends HTMLElement>(\n    value: string,\n    usagesMap: Map<ShadowRoot | HTMLHeadElement, Map<string, UsageRecord<T>>>,\n    targetShadowRoot?: ShadowRoot,\n  ): void {\n    if (targetShadowRoot) {\n      // Remove from specific shadow root\n      this.removeUsageFromTarget(value, usagesMap, targetShadowRoot);\n    } else {\n      // Remove from document head only\n      this.removeUsageFromTarget(value, usagesMap, this.doc.head);\n    }\n  }\n  /**\n   * Helper method for removing styles from a specific target container.\n   */\n  private removeUsageFromTarget<T extends HTMLElement>(\n    value: string,\n    usagesMap: Map<ShadowRoot | HTMLHeadElement, Map<string, UsageRecord<T>>>,\n    styleRoot: ShadowRoot | HTMLHeadElement,\n  ): void {\n    const usages = usagesMap.get(styleRoot);\n    if (!usages) return;\n\n    const record = usages.get(value);\n    if (record) {\n      record.usage--;\n      if (record.usage <= 0) {\n        removeElements(record.elements);\n        usages.delete(value);\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    for (const usages of [...this.inline.values(), ...this.external.values()]) {\n      for (const [, {elements}] of usages) {\n        removeElements(elements);\n      }\n    }\n    this.standardShadowHosts.clear();\n  }\n\n  /**\n   * Adds a host node to the set of style hosts and adds all existing style usage to\n   * the newly added host node.\n   *\n   * This is currently only used for Shadow DOM encapsulation mode.\n   */\n  addHost(hostNode: Node): void {\n    this.standardShadowHosts.add(hostNode);\n\n    // Add existing styles to new host (original behavior, adapted for nested structure)\n    const headInline = this.inline.get(this.doc.head);\n    const headExternal = this.external.get(this.doc.head);\n\n    if (headInline) {\n      for (const [style, {elements}] of headInline) {\n        elements.push(this.addElement(hostNode, createStyleElement(style, this.doc)));\n      }\n    }\n\n    if (headExternal) {\n      for (const [url, {elements}] of headExternal) {\n        elements.push(this.addElement(hostNode, createLinkElement(url, this.doc)));\n      }\n    }\n  }\n\n  removeHost(hostNode: Node): void {\n    this.standardShadowHosts.delete(hostNode);\n\n    // Clean up usage maps for removed host\n    const hostKey = hostNode as ShadowRoot | HTMLHeadElement;\n    const inlineUsages = this.inline.get(hostKey);\n    const externalUsages = this.external.get(hostKey);\n\n    if (inlineUsages) {\n      for (const {elements} of inlineUsages.values()) {\n        removeElements(elements);\n      }\n      this.inline.delete(hostKey);\n    }\n\n    if (externalUsages) {\n      for (const {elements} of externalUsages.values()) {\n        removeElements(elements);\n      }\n      this.external.delete(hostKey);\n    }\n  }\n\n  private addElement<T extends HTMLElement>(host: Node, element: T): T {\n    if (this.nonce) {\n      element.setAttribute('nonce', this.nonce);\n    }\n\n    // Add application identifier when on the server to support client-side reuse\n    if (typeof ngServerMode !== 'undefined' && ngServerMode) {\n      element.setAttribute(APP_ID_ATTRIBUTE_NAME, this.appId);\n    }\n    host.appendChild(element);\n    return element;\n  }\n\n  addShadowRoot(shadowRoot: ShadowRoot): void {\n    // Throw error if using isolated shadow roots in SSR mode\n    if (typeof ngServerMode !== 'undefined' && ngServerMode) {\n      throw new Error(\n        'IsolatedShadowRoot is not supported in SSR mode until declarative shadow DOM is supported.',\n      );\n    }\n\n    // Check if ShadowRoot is supported in this environment\n    if (typeof ShadowRoot === 'undefined') {\n      throw new Error('ShadowRoot is not supported in this environment.');\n    }\n\n    if (\n      typeof ngDevMode !== 'undefined' &&\n      ngDevMode &&\n      this.isolatedShadowRoots.includes(shadowRoot)\n    ) {\n      throw new Error('Shadow root is already registered.');\n    }\n\n    this.isolatedShadowRoots.push(shadowRoot);\n  }\n\n  removeShadowRoot(shadowRoot: ShadowRoot): void {\n    const index = this.isolatedShadowRoots.indexOf(shadowRoot);\n\n    if (typeof ngDevMode !== 'undefined' && ngDevMode && ngDevMode && index === -1) {\n      throw new Error('Attempted to remove shadow root that was not previously added.');\n    }\n\n    this.isolatedShadowRoots.splice(index, 1);\n\n    // Clean up usage maps for removed shadow root\n    const inlineUsages = this.inline.get(shadowRoot);\n    const externalUsages = this.external.get(shadowRoot);\n\n    if (inlineUsages) {\n      for (const {elements} of inlineUsages.values()) {\n        removeElements(elements);\n      }\n      this.inline.delete(shadowRoot);\n    }\n\n    if (externalUsages) {\n      for (const {elements} of externalUsages.values()) {\n        removeElements(elements);\n      }\n      this.external.delete(shadowRoot);\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  Injectable,\n  ɵgetLContext as getLContext,\n  ɵunwrapRNode as unwrapRNode,\n  ɵHOST as HOST,\n  ɵPARENT as PARENT,\n} from '@angular/core';\n\n/**\n * Service that tracks active shadow DOM contexts and determines where styles should be applied\n * for IsolatedShadowDom encapsulation.\n */\n@Injectable({providedIn: 'root'})\nexport class IsolatedStyleScopeService {\n  // Track isolated shadow roots with their host elements\n  private isolatedShadowRoots = new Map<ShadowRoot, Element>();\n  // Track standard shadow roots with their host elements\n  private standardShadowRoots = new Map<ShadowRoot, Element>();\n\n  registerIsolatedShadowRoot(shadowRoot: ShadowRoot): void {\n    this.isolatedShadowRoots.set(shadowRoot, shadowRoot.host);\n  }\n\n  registerStandardShadowRoot(shadowRoot: ShadowRoot): void {\n    this.standardShadowRoots.set(shadowRoot, shadowRoot.host);\n  }\n\n  deregisterIsolatedShadowRoot(shadowRoot: ShadowRoot): void {\n    this.isolatedShadowRoots.delete(shadowRoot);\n  }\n\n  deregisterStandardShadowRoot(shadowRoot: ShadowRoot): void {\n    this.standardShadowRoots.delete(shadowRoot);\n  }\n\n  /**\n   * Determines where styles should be applied by checking the shadow DOM context.\n   * Uses Angular's LView hierarchy combined with DOM checks for robustness.\n   */\n  determineStyleTargets(element: HTMLElement): ShadowRoot[] {\n    if (typeof ShadowRoot === 'undefined') {\n      return [];\n    }\n\n    // Check if element is already inside a shadow root\n    const elementRoot = element.getRootNode();\n    if (elementRoot instanceof ShadowRoot && this.isRegisteredShadowRoot(elementRoot)) {\n      return this.getShadowRootsForContext(elementRoot);\n    }\n\n    // Try Angular's LView hierarchy with DOM ancestor checking\n    try {\n      const result = this.findShadowRootViaLView(element);\n      if (result) {\n        return result;\n      }\n    } catch (e) {\n      // LView not available, return empty to use broadcast behavior\n    }\n\n    return [];\n  }\n\n  /**\n   * Finds shadow root hosts using Angular's LView hierarchy.\n   *\n   * Note: With IsolatedShadowDom, ng-content projection is disabled and native <slot>\n   * elements are used instead. This means projected content stays in the light DOM,\n   * so we only need to check the LView hierarchy - no DOM walking required.\n   */\n  private findShadowRootViaLView(element: HTMLElement): ShadowRoot[] | null {\n    const context = getLContext(element);\n    if (!context || !context.lView) {\n      return null;\n    }\n\n    // Traverse LView hierarchy to find component hosts\n    let lView = context.lView;\n    const visited = new Set<any>();\n\n    while (lView && !visited.has(lView)) {\n      visited.add(lView);\n\n      const hostRNode = lView[HOST];\n      if (hostRNode) {\n        const hostElement = unwrapRNode(hostRNode);\n        if (hostElement instanceof Element) {\n          const shadowRoots = this.checkIfShadowRootHost(hostElement);\n          if (shadowRoots) {\n            return shadowRoots;\n          }\n        }\n      }\n\n      const parentLView = lView[PARENT];\n      if (parentLView && Array.isArray(parentLView) && parentLView[HOST] !== undefined) {\n        lView = parentLView as any;\n      } else {\n        break;\n      }\n    }\n\n\n    return null;\n  }\n\n  /**\n   * Checks if the given element is a shadow root host and returns appropriate shadow roots.\n   */\n  private checkIfShadowRootHost(element: Element): ShadowRoot[] | null {\n    for (const [shadowRoot, host] of [...this.isolatedShadowRoots, ...this.standardShadowRoots]) {\n      if (host === element) {\n        return this.getShadowRootsForContext(shadowRoot);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the appropriate shadow roots based on whether it's isolated or standard.\n   */\n  private getShadowRootsForContext(shadowRoot: ShadowRoot): ShadowRoot[] {\n    if (this.isIsolatedShadowRoot(shadowRoot)) {\n      return [shadowRoot];\n    } else {\n      return Array.from(this.standardShadowRoots.keys());\n    }\n  }\n\n  private isRegisteredShadowRoot(shadowRoot: ShadowRoot): boolean {\n    return this.isolatedShadowRoots.has(shadowRoot) || this.standardShadowRoots.has(shadowRoot);\n  }\n\n  /**\n   * Check if a shadow root is registered as an isolated shadow root\n   */\n  isIsolatedShadowRoot(shadowRoot: ShadowRoot): boolean {\n    return this.isolatedShadowRoots.has(shadowRoot);\n  }\n\n  /**\n   * Check if a shadow root is registered as a standard shadow root\n   */\n  isStandardShadowRoot(shadowRoot: ShadowRoot): boolean {\n    return this.standardShadowRoots.has(shadowRoot);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {DOCUMENT, ɵgetDOM as getDOM} from '@angular/common';\nimport {\n  APP_ID,\n  CSP_NONCE,\n  Inject,\n  Injectable,\n  InjectionToken,\n  NgZone,\n  OnDestroy,\n  PLATFORM_ID,\n  Renderer2,\n  RendererFactory2,\n  RendererStyleFlags2,\n  RendererType2,\n  ViewEncapsulation,\n  ɵRuntimeError as RuntimeError,\n  type ListenerOptions,\n  ɵTracingService as TracingService,\n  ɵTracingSnapshot as TracingSnapshot,\n  Optional,\n  ɵallLeavingAnimations as allLeavingAnimations,\n} from '@angular/core';\n\nimport {RuntimeErrorCode} from '../errors';\n\nimport {EventManager} from './events/event_manager';\nimport {createLinkElement, SharedStylesHost} from './shared_styles_host';\nimport {IsolatedStyleScopeService} from './isolated_style_scope';\n\nexport const NAMESPACE_URIS: {[ns: string]: string} = {\n  'svg': 'http://www.w3.org/2000/svg',\n  'xhtml': 'http://www.w3.org/1999/xhtml',\n  'xlink': 'http://www.w3.org/1999/xlink',\n  'xml': 'http://www.w3.org/XML/1998/namespace',\n  'xmlns': 'http://www.w3.org/2000/xmlns/',\n  'math': 'http://www.w3.org/1998/Math/MathML',\n};\n\nconst COMPONENT_REGEX = /%COMP%/g;\nconst SOURCEMAP_URL_REGEXP = /\\/\\*#\\s*sourceMappingURL=(.+?)\\s*\\*\\//;\nconst PROTOCOL_REGEXP = /^https?:/;\n\nexport const COMPONENT_VARIABLE = '%COMP%';\nexport const HOST_ATTR = `_nghost-${COMPONENT_VARIABLE}`;\nexport const CONTENT_ATTR = `_ngcontent-${COMPONENT_VARIABLE}`;\n\n/**\n * The default value for the `REMOVE_STYLES_ON_COMPONENT_DESTROY` DI token.\n */\nconst REMOVE_STYLES_ON_COMPONENT_DESTROY_DEFAULT = true;\n\n/**\n * A DI token that indicates whether styles\n * of destroyed components should be removed from DOM.\n *\n * By default, the value is set to `true`.\n * @publicApi\n */\nexport const REMOVE_STYLES_ON_COMPONENT_DESTROY = new InjectionToken<boolean>(\n  ngDevMode ? 'RemoveStylesOnCompDestroy' : '',\n  {\n    providedIn: 'root',\n    factory: () => REMOVE_STYLES_ON_COMPONENT_DESTROY_DEFAULT,\n  },\n);\n\nexport function shimContentAttribute(componentShortId: string): string {\n  return CONTENT_ATTR.replace(COMPONENT_REGEX, componentShortId);\n}\n\nexport function shimHostAttribute(componentShortId: string): string {\n  return HOST_ATTR.replace(COMPONENT_REGEX, componentShortId);\n}\n\nexport function shimStylesContent(compId: string, styles: string[]): string[] {\n  return styles.map((s) => s.replace(COMPONENT_REGEX, compId));\n}\n\n/**\n * Prepends a baseHref to the `sourceMappingURL` within the provided CSS content.\n * If the `sourceMappingURL` contains an inline (encoded) map, the function skips processing.\n *\n * @note For inline stylesheets, the `sourceMappingURL` is relative to the page's origin\n * and not the provided baseHref. This function is needed as when accessing the page with a URL\n * containing two or more segments.\n * For example, if the baseHref is set to `/`, and you visit a URL like `http://localhost/foo/bar`,\n * the map would be requested from `http://localhost/foo/bar/comp.css.map` instead of what you'd expect,\n * which is `http://localhost/comp.css.map`. This behavior is corrected by modifying the `sourceMappingURL`\n * to ensure external source maps are loaded relative to the baseHref.\n *\n\n * @param baseHref - The base URL to prepend to the `sourceMappingURL`.\n * @param styles - An array of CSS content strings, each potentially containing a `sourceMappingURL`.\n * @returns The updated array of CSS content strings with modified `sourceMappingURL` values,\n * or the original content if no modification is needed.\n */\nexport function addBaseHrefToCssSourceMap(baseHref: string, styles: string[]): string[] {\n  if (!baseHref) {\n    return styles;\n  }\n\n  const absoluteBaseHrefUrl = new URL(baseHref, 'http://localhost');\n\n  return styles.map((cssContent) => {\n    if (!cssContent.includes('sourceMappingURL=')) {\n      return cssContent;\n    }\n\n    return cssContent.replace(SOURCEMAP_URL_REGEXP, (_, sourceMapUrl) => {\n      if (\n        sourceMapUrl[0] === '/' ||\n        sourceMapUrl.startsWith('data:') ||\n        PROTOCOL_REGEXP.test(sourceMapUrl)\n      ) {\n        return `/*# sourceMappingURL=${sourceMapUrl} */`;\n      }\n\n      const {pathname: resolvedSourceMapUrl} = new URL(sourceMapUrl, absoluteBaseHrefUrl);\n\n      return `/*# sourceMappingURL=${resolvedSourceMapUrl} */`;\n    });\n  });\n}\n\n@Injectable()\nexport class DomRendererFactory2 implements RendererFactory2, OnDestroy {\n  private readonly rendererByCompId = new Map<\n    string,\n    EmulatedEncapsulationDomRenderer2 | NoneEncapsulationDomRenderer\n  >();\n  private readonly defaultRenderer: Renderer2;\n  private readonly platformIsServer: boolean;\n\n  constructor(\n    private readonly eventManager: EventManager,\n    private readonly sharedStylesHost: SharedStylesHost,\n    @Inject(APP_ID) private readonly appId: string,\n    @Inject(REMOVE_STYLES_ON_COMPONENT_DESTROY) private removeStylesOnCompDestroy: boolean,\n    @Inject(DOCUMENT) private readonly doc: Document,\n    @Inject(PLATFORM_ID) readonly platformId: Object,\n    readonly ngZone: NgZone,\n    @Inject(CSP_NONCE) private readonly nonce: string | null = null,\n    @Inject(TracingService)\n    @Optional()\n    private readonly tracingService: TracingService<TracingSnapshot> | null = null,\n    private readonly styleScopeService: IsolatedStyleScopeService,\n  ) {\n    this.platformIsServer = typeof ngServerMode !== 'undefined' && ngServerMode;\n    this.defaultRenderer = new DefaultDomRenderer2(\n      eventManager,\n      doc,\n      ngZone,\n      this.platformIsServer,\n      this.tracingService,\n    );\n  }\n\n  createRenderer(element: any, type: RendererType2 | null): Renderer2 {\n    if (!element || !type) {\n      return this.defaultRenderer;\n    }\n\n    if (\n      typeof ngServerMode !== 'undefined' &&\n      ngServerMode &&\n      (type.encapsulation === ViewEncapsulation.ShadowDom ||\n        type.encapsulation === ViewEncapsulation.IsolatedShadowDom)\n    ) {\n      // Domino does not support shadow DOM.\n      type = {...type, encapsulation: ViewEncapsulation.Emulated};\n    }\n\n    const renderer = this.getOrCreateRenderer(element, type);\n    // Renderers have different logic due to different encapsulation behaviours.\n    // Ex: for emulated, an attribute is added to the element.\n    if (renderer instanceof EmulatedEncapsulationDomRenderer2) {\n      renderer.applyToHost(element);\n    } else if (renderer instanceof NoneEncapsulationDomRenderer) {\n      renderer.applyStyles(element);\n    }\n\n    return renderer;\n  }\n\n  private getOrCreateRenderer(element: HTMLElement, type: RendererType2): Renderer2 {\n    const rendererByCompId = this.rendererByCompId;\n    let renderer = rendererByCompId.get(type.id);\n\n    if (!renderer) {\n      const doc = this.doc;\n      const ngZone = this.ngZone;\n      const eventManager = this.eventManager;\n      const sharedStylesHost = this.sharedStylesHost;\n      const removeStylesOnCompDestroy = this.removeStylesOnCompDestroy;\n      const platformIsServer = this.platformIsServer;\n      const tracingService = this.tracingService;\n\n      switch (type.encapsulation) {\n        case ViewEncapsulation.Emulated:\n          renderer = new EmulatedEncapsulationDomRenderer2(\n            eventManager,\n            sharedStylesHost,\n            type,\n            this.appId,\n            removeStylesOnCompDestroy,\n            doc,\n            ngZone,\n            platformIsServer,\n            tracingService,\n            this.styleScopeService,\n          );\n          break;\n        case ViewEncapsulation.ShadowDom:\n        case ViewEncapsulation.IsolatedShadowDom:\n          return new ShadowDomRenderer(\n            eventManager,\n            element,\n            type,\n            doc,\n            ngZone,\n            this.nonce,\n            platformIsServer,\n            tracingService,\n            sharedStylesHost,\n            this.styleScopeService,\n          );\n        default:\n          renderer = new NoneEncapsulationDomRenderer(\n            eventManager,\n            sharedStylesHost,\n            type,\n            removeStylesOnCompDestroy,\n            doc,\n            ngZone,\n            platformIsServer,\n            tracingService,\n            this.styleScopeService,\n            undefined,\n          );\n          break;\n      }\n\n      rendererByCompId.set(type.id, renderer);\n    }\n\n    return renderer;\n  }\n\n  ngOnDestroy() {\n    this.rendererByCompId.clear();\n  }\n\n  /**\n   * Used during HMR to clear any cached data about a component.\n   * @param componentId ID of the component that is being replaced.\n   */\n  protected componentReplaced(componentId: string) {\n    this.rendererByCompId.delete(componentId);\n  }\n}\n\nclass DefaultDomRenderer2 implements Renderer2 {\n  data: {[key: string]: any} = Object.create(null);\n\n  /**\n   * By default this renderer throws when encountering synthetic properties\n   * This can be disabled for example by the AsyncAnimationRendererFactory\n   */\n  throwOnSyntheticProps = true;\n\n  constructor(\n    private readonly eventManager: EventManager,\n    private readonly doc: Document,\n    protected readonly ngZone: NgZone,\n    protected readonly platformIsServer: boolean,\n    private readonly tracingService: TracingService<TracingSnapshot> | null,\n  ) {}\n\n  destroy(): void {}\n\n  destroyNode = null;\n\n  createElement(name: string, namespace?: string): any {\n    if (namespace) {\n      // TODO: `|| namespace` was added in\n      // https://github.com/angular/angular/commit/2b9cc8503d48173492c29f5a271b61126104fbdb to\n      // support how Ivy passed around the namespace URI rather than short name at the time. It did\n      // not, however extend the support to other parts of the system (setAttribute, setAttribute,\n      // and the ServerRenderer). We should decide what exactly the semantics for dealing with\n      // namespaces should be and make it consistent.\n      // Related issues:\n      // https://github.com/angular/angular/issues/44028\n      // https://github.com/angular/angular/issues/44883\n      return this.doc.createElementNS(NAMESPACE_URIS[namespace] || namespace, name);\n    }\n\n    return this.doc.createElement(name);\n  }\n\n  createComment(value: string): any {\n    return this.doc.createComment(value);\n  }\n\n  createText(value: string): any {\n    return this.doc.createTextNode(value);\n  }\n\n  appendChild(parent: any, newChild: any): void {\n    const targetParent = isTemplateNode(parent) ? parent.content : parent;\n    targetParent.appendChild(newChild);\n  }\n\n  insertBefore(parent: any, newChild: any, refChild: any): void {\n    if (parent) {\n      const targetParent = isTemplateNode(parent) ? parent.content : parent;\n      targetParent.insertBefore(newChild, refChild);\n    }\n  }\n\n  removeChild(_parent: any, oldChild: any): void {\n    // child was removed\n    oldChild.remove();\n  }\n\n  selectRootElement(selectorOrNode: string | any, preserveContent?: boolean): any {\n    let el: any =\n      typeof selectorOrNode === 'string' ? this.doc.querySelector(selectorOrNode) : selectorOrNode;\n    if (!el) {\n      throw new RuntimeError(\n        RuntimeErrorCode.ROOT_NODE_NOT_FOUND,\n        (typeof ngDevMode === 'undefined' || ngDevMode) &&\n          `The selector \"${selectorOrNode}\" did not match any elements`,\n      );\n    }\n    if (!preserveContent) {\n      el.textContent = '';\n    }\n    return el;\n  }\n\n  parentNode(node: any): any {\n    return node.parentNode;\n  }\n\n  nextSibling(node: any): any {\n    return node.nextSibling;\n  }\n\n  setAttribute(el: any, name: string, value: string, namespace?: string): void {\n    if (namespace) {\n      name = namespace + ':' + name;\n      const namespaceUri = NAMESPACE_URIS[namespace];\n      if (namespaceUri) {\n        el.setAttributeNS(namespaceUri, name, value);\n      } else {\n        el.setAttribute(name, value);\n      }\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n\n  removeAttribute(el: any, name: string, namespace?: string): void {\n    if (namespace) {\n      const namespaceUri = NAMESPACE_URIS[namespace];\n      if (namespaceUri) {\n        el.removeAttributeNS(namespaceUri, name);\n      } else {\n        el.removeAttribute(`${namespace}:${name}`);\n      }\n    } else {\n      el.removeAttribute(name);\n    }\n  }\n\n  addClass(el: any, name: string): void {\n    el.classList.add(name);\n  }\n\n  removeClass(el: any, name: string): void {\n    el.classList.remove(name);\n  }\n\n  setStyle(el: any, style: string, value: any, flags: RendererStyleFlags2): void {\n    if (flags & (RendererStyleFlags2.DashCase | RendererStyleFlags2.Important)) {\n      el.style.setProperty(style, value, flags & RendererStyleFlags2.Important ? 'important' : '');\n    } else {\n      el.style[style] = value;\n    }\n  }\n\n  removeStyle(el: any, style: string, flags: RendererStyleFlags2): void {\n    if (flags & RendererStyleFlags2.DashCase) {\n      // removeProperty has no effect when used on camelCased properties.\n      el.style.removeProperty(style);\n    } else {\n      el.style[style] = '';\n    }\n  }\n\n  setProperty(el: any, name: string, value: any): void {\n    if (el == null) {\n      return;\n    }\n\n    (typeof ngDevMode === 'undefined' || ngDevMode) &&\n      this.throwOnSyntheticProps &&\n      checkNoSyntheticProp(name, 'property');\n    el[name] = value;\n  }\n\n  setValue(node: any, value: string): void {\n    node.nodeValue = value;\n  }\n\n  listen(\n    target: 'window' | 'document' | 'body' | any,\n    event: string,\n    callback: (event: any) => boolean,\n    options?: ListenerOptions,\n  ): () => void {\n    (typeof ngDevMode === 'undefined' || ngDevMode) &&\n      this.throwOnSyntheticProps &&\n      checkNoSyntheticProp(event, 'listener');\n    if (typeof target === 'string') {\n      target = getDOM().getGlobalEventTarget(this.doc, target);\n      if (!target) {\n        throw new RuntimeError(\n          RuntimeErrorCode.UNSUPPORTED_EVENT_TARGET,\n          (typeof ngDevMode === 'undefined' || ngDevMode) &&\n            `Unsupported event target ${target} for event ${event}`,\n        );\n      }\n    }\n\n    let wrappedCallback = this.decoratePreventDefault(callback);\n\n    if (this.tracingService?.wrapEventListener) {\n      wrappedCallback = this.tracingService.wrapEventListener(target, event, wrappedCallback);\n    }\n\n    return this.eventManager.addEventListener(\n      target,\n      event,\n      wrappedCallback,\n      options,\n    ) as VoidFunction;\n  }\n\n  private decoratePreventDefault(eventHandler: Function): Function {\n    // `DebugNode.triggerEventHandler` needs to know if the listener was created with\n    // decoratePreventDefault or is a listener added outside the Angular context so it can handle\n    // the two differently. In the first case, the special '__ngUnwrap__' token is passed to the\n    // unwrap the listener (see below).\n    return (event: any) => {\n      // Ivy uses '__ngUnwrap__' as a special token that allows us to unwrap the function\n      // so that it can be invoked programmatically by `DebugNode.triggerEventHandler`. The\n      // debug_node can inspect the listener toString contents for the existence of this special\n      // token. Because the token is a string literal, it is ensured to not be modified by compiled\n      // code.\n      if (event === '__ngUnwrap__') {\n        return eventHandler;\n      }\n\n      // Run the event handler inside the ngZone because event handlers are not patched\n      // by Zone on the server. This is required only for tests.\n      const allowDefaultBehavior =\n        typeof ngServerMode !== 'undefined' && ngServerMode\n          ? this.ngZone.runGuarded(() => eventHandler(event))\n          : eventHandler(event);\n      if (allowDefaultBehavior === false) {\n        event.preventDefault();\n      }\n\n      return undefined;\n    };\n  }\n}\n\nconst AT_CHARCODE = (() => '@'.charCodeAt(0))();\n\nfunction checkNoSyntheticProp(name: string, nameKind: string) {\n  if (name.charCodeAt(0) === AT_CHARCODE) {\n    throw new RuntimeError(\n      RuntimeErrorCode.UNEXPECTED_SYNTHETIC_PROPERTY,\n      `Unexpected synthetic ${nameKind} ${name} found. Please make sure that:\n  - Make sure \\`provideAnimationsAsync()\\`, \\`provideAnimations()\\` or \\`provideNoopAnimations()\\` call was added to a list of providers used to bootstrap an application.\n  - There is a corresponding animation configuration named \\`${name}\\` defined in the \\`animations\\` field of the \\`@Component\\` decorator (see https://angular.dev/api/core/Component#animations).`,\n    );\n  }\n}\n\nfunction isTemplateNode(node: any): node is HTMLTemplateElement {\n  return node.tagName === 'TEMPLATE' && node.content !== undefined;\n}\n\nclass ShadowDomRenderer extends DefaultDomRenderer2 {\n  private shadowRoot: ShadowRoot;\n\n  constructor(\n    eventManager: EventManager,\n    private hostEl: HTMLElement,\n    private component: RendererType2,\n    doc: Document,\n    ngZone: NgZone,\n    nonce: string | null,\n    platformIsServer: boolean,\n    tracingService: TracingService<TracingSnapshot> | null,\n    private sharedStylesHost: SharedStylesHost,\n    private styleScopeService: IsolatedStyleScopeService,\n  ) {\n    super(eventManager, doc, ngZone, platformIsServer, tracingService);\n\n    // Only create shadow root in browser environments\n    if (!platformIsServer) {\n      this.shadowRoot = (hostEl as HTMLElement).attachShadow({mode: 'open'});\n    } else {\n      // In SSR or environments without shadow DOM support, throw\n      throw new Error(\n        'IsolatedShadowRoot is not supported in SSR mode until declarative shadow DOM is supported.',\n      );\n    }\n\n    // Determine if this is isolated based on component encapsulation\n    const isIsolated = component.encapsulation === ViewEncapsulation.IsolatedShadowDom;\n\n    // Register shadow root with StyleScopeService for style targeting (only if service available and in browser)\n    if (this.styleScopeService) {\n      if (isIsolated) {\n        this.styleScopeService.registerIsolatedShadowRoot(this.shadowRoot);\n        this.sharedStylesHost.addShadowRoot(this.shadowRoot);\n      } else {\n        this.styleScopeService.registerStandardShadowRoot(this.shadowRoot);\n        this.sharedStylesHost.addHost(this.shadowRoot);\n      }\n    }\n\n    let styles = component.styles;\n    if (ngDevMode) {\n      // We only do this in development, as for production users should not add CSS sourcemaps to components.\n      const baseHref = getDOM().getBaseHref(doc) ?? '';\n      styles = addBaseHrefToCssSourceMap(baseHref, styles);\n    }\n\n    if (isIsolated && !platformIsServer) {\n      // For IsolatedShadowDom, use SharedStylesHost with shadowRoot targeting\n      this.sharedStylesHost.addStyles(styles, component.getExternalStyles?.(), this.shadowRoot);\n    } else {\n      // For standard ShadowDom or SSR, use original approach\n      styles = shimStylesContent(component.id, styles);\n\n      for (const style of styles) {\n        const styleEl = doc.createElement('style');\n\n        if (nonce) {\n          styleEl.setAttribute('nonce', nonce);\n        }\n\n        styleEl.textContent = style;\n        this.shadowRoot.appendChild(styleEl);\n      }\n\n      // Apply any external component styles to the shadow root for the component's element.\n      // The ShadowDOM renderer uses an alternative execution path for component styles that\n      // does not use the SharedStylesHost that other encapsulation modes leverage. Much like\n      // the manual addition of embedded styles directly above, any external stylesheets\n      // must be manually added here to ensure ShadowDOM components are correctly styled.\n      // TODO: Consider reworking the DOM Renderers to consolidate style handling.\n      const styleUrls = component.getExternalStyles?.();\n      if (styleUrls) {\n        for (const styleUrl of styleUrls) {\n          const linkEl = createLinkElement(styleUrl, doc);\n          if (nonce) {\n            linkEl.setAttribute('nonce', nonce);\n          }\n          this.shadowRoot.appendChild(linkEl);\n        }\n      }\n    }\n  }\n\n  private nodeOrShadowRoot(node: HTMLElement): HTMLElement | ShadowRoot {\n    return node === this.hostEl ? this.shadowRoot : node;\n  }\n\n  override appendChild(parent: HTMLElement, newChild: Node): void {\n    return super.appendChild(this.nodeOrShadowRoot(parent), newChild);\n  }\n\n  override insertBefore(parent: HTMLElement, newChild: Node, refChild: Node): void {\n    return super.insertBefore(this.nodeOrShadowRoot(parent), newChild, refChild);\n  }\n\n  override removeChild(_parent: HTMLElement, oldChild: Node): void {\n    return super.removeChild(null, oldChild);\n  }\n\n  override parentNode(node: any): any {\n    return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(node)));\n  }\n\n  override destroy() {\n    // Query the service to determine what type this shadow root is (only if service available and in browser)\n    if (!this.platformIsServer) {\n      if (this.styleScopeService.isIsolatedShadowRoot(this.shadowRoot)) {\n        this.styleScopeService.deregisterIsolatedShadowRoot(this.shadowRoot);\n        this.sharedStylesHost.removeShadowRoot(this.shadowRoot);\n      } else if (this.styleScopeService.isStandardShadowRoot(this.shadowRoot)) {\n        this.styleScopeService.deregisterStandardShadowRoot(this.shadowRoot);\n        this.sharedStylesHost.removeHost(this.shadowRoot);\n      }\n    }\n  }\n}\n\nclass NoneEncapsulationDomRenderer extends DefaultDomRenderer2 {\n  protected readonly styles: string[];\n  protected readonly styleUrls?: string[];\n\n  constructor(\n    eventManager: EventManager,\n    protected readonly sharedStylesHost: SharedStylesHost,\n    component: RendererType2,\n    private removeStylesOnCompDestroy: boolean,\n    doc: Document,\n    ngZone: NgZone,\n    platformIsServer: boolean,\n    tracingService: TracingService<TracingSnapshot> | null,\n    protected styleScopeService: IsolatedStyleScopeService,\n    compId?: string,\n  ) {\n    super(eventManager, doc, ngZone, platformIsServer, tracingService);\n    let styles = component.styles;\n    if (ngDevMode) {\n      // We only do this in development, as for production users should not add CSS sourcemaps to components.\n      const baseHref = getDOM().getBaseHref(doc) ?? '';\n      styles = addBaseHrefToCssSourceMap(baseHref, styles);\n    }\n\n    this.styles = compId ? shimStylesContent(compId, styles) : styles;\n    this.styleUrls = component.getExternalStyles?.(compId);\n  }\n\n  applyStyles(element: HTMLElement): void {\n    // Check if we should target specific shadow roots (only if service and element available)\n    if (element && !this.platformIsServer) {\n      const targetShadowRoots = this.styleScopeService.determineStyleTargets(element);\n      if (targetShadowRoots.length > 0) {\n        for (const shadowRoot of targetShadowRoots) {\n          this.sharedStylesHost.addStyles(this.styles, this.styleUrls, shadowRoot);\n        }\n        return;\n      }\n    }\n\n    // Default behavior: apply to document head and all standard shadow hosts\n    this.sharedStylesHost.addStyles(this.styles, this.styleUrls);\n  }\n\n  override destroy(): void {\n    if (!this.removeStylesOnCompDestroy) {\n      return;\n    }\n    if (allLeavingAnimations.size === 0) {\n      this.sharedStylesHost.removeStyles(this.styles, this.styleUrls);\n    }\n  }\n}\n\nclass EmulatedEncapsulationDomRenderer2 extends NoneEncapsulationDomRenderer {\n  private contentAttr: string;\n  private hostAttr: string;\n\n  constructor(\n    eventManager: EventManager,\n    sharedStylesHost: SharedStylesHost,\n    component: RendererType2,\n    appId: string,\n    removeStylesOnCompDestroy: boolean,\n    doc: Document,\n    ngZone: NgZone,\n    platformIsServer: boolean,\n    tracingService: TracingService<TracingSnapshot> | null,\n    styleScopeService: IsolatedStyleScopeService,\n  ) {\n    const compId = appId + '-' + component.id;\n    super(\n      eventManager,\n      sharedStylesHost,\n      component,\n      removeStylesOnCompDestroy,\n      doc,\n      ngZone,\n      platformIsServer,\n      tracingService,\n      styleScopeService,\n      compId,\n    );\n    this.contentAttr = shimContentAttribute(compId);\n    this.hostAttr = shimHostAttribute(compId);\n  }\n\n  applyToHost(element: HTMLElement): void {\n    // Use inherited applyStyles method to handle shadow root targeting and fallback\n    this.applyStyles(element);\n    this.setAttribute(element, this.hostAttr, '');\n  }\n\n  override createElement(parent: any, name: string): Element {\n    const el = super.createElement(parent, name);\n    super.setAttribute(el, this.contentAttr, '');\n    return el;\n  }\n}\n"],"names":["RuntimeError","getLContext","HOST","unwrapRNode","PARENT","i1.EventManager","i2.SharedStylesHost","TracingService","i3.IsolatedStyleScopeService","getDOM","allLeavingAnimations"],"mappings":"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"}